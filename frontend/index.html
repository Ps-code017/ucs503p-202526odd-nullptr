<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script  src="main.js"></script>
  <style>
    body { padding: 20px; font-family: sans-serif; }
    .btn { display: block; margin-top: 20px; padding: 14px; background: #000; color: #fff; text-align: center; border-radius: 8px; }
  </style>
</head>
<body>

<h2>Team Matcher</h2>

<div id="welcome"></div>

<a class="btn" href="teams.html">Join a Team</a>
<a class="btn" href="profile.html">Edit Profile</a>
<a class="btn" href="rank.html">Find Best Matches</a>
<a class="btn" href="see-profile.html">See My Profile</a>

<button style="margin-top:30px" onclick="logout()">Logout</button>

<script>
(async () => {
  try {

     
     console.log("Fetching user info... before apiGet");
     const me = await apiGet("/api/users/me"); 
     console.log("Fetching user info... after apiGet");
     
    document.getElementById("welcome").innerText = `Welcome, ${me.data.name}`;
    return; 
  } catch (err) {
     
     console.error("Auth failed:", err.message); 

    
     logout();
    setTimeout(() => {
        window.location.href = "login.html";
    }, 1000); 
 }
})();
</script>

</body>
</html>

